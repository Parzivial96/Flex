{{page-title "Profile"}}

<div class="profileContainer">
    <div class="profileImageContainer" {{on "click" this.showImageUpload}}>
        {{#if @model.dp}}
        <img src="data:image/png;base64,{{@model.dp}}">
        {{else}}
        <img src="../assets/defaultDP.png">
        {{/if}}
    </div>
    <div class="userDetails">
        <p id="username">{{@model.name}}</p>
        <p id="email">{{@model.email}}</p><br>
        <LogoutButton />
    </div>
</div>
<div class="optionsContainer">
    <LinkTo @route="myorders" class="optionsButton">
        <img src="../assets/myorder.png">
        <p>My Orders</p>
    </LinkTo>
    <LinkTo @route="favorites" class="optionsButton">
        <img src="../assets/favorite.png">
        <p>Favorites</p>
    </LinkTo>
    <LinkTo @route="cart" class="optionsButton">
        <img src="../assets/cart.png">
        <p>Cart</p>
    </LinkTo>
    {{#if (not-eq @model.role 'Consumer')}}
    <LinkTo @route="dashboard" class="optionsButton">
        <img src="../assets/dashboard.png">
        <p>Dashboard</p>
    </LinkTo>
    {{/if}}
</div>

{{#if this.isImageUploadVisible}}
<div class="imageUploadPopup">
    <div class="popupContent">
        <input type="file" accept="image/*" {{on "change" this.handleImageChange}}>
        <div>
            <button class="button" type="button" {{on "click" this.saveImage}}>Save</button>
            <button class="button" type="button" {{on "click" this.hideImageUpload}}>Cancel</button>
        </div>
    </div>
</div>
{{/if}}